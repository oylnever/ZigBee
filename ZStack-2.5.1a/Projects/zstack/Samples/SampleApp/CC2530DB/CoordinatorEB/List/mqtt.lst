###############################################################################
#
# IAR C/C++ Compiler V10.30.1.6000 for 8051               04/Sep/2021  12:32:00
# Copyright 2004-2018 IAR Systems AB.
# PC-locked license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c
#    Command line       =  
#        -f C:\Users\OY\AppData\Local\Temp\EWC740.tmp
#        (C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c
#        -D ZTOOL_P1 -D xMT_TASK -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D
#        LCD_SUPPORTED=DEBUG -lC
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\CoordinatorEB\List
#        -lA
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\CoordinatorEB\List
#        --diag_suppress Pe001,Pa010 -o
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\CoordinatorEB\Obj
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 8 -f
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wCoord.cfg
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DZDO_COORDINATOR -DRTR_NWK) -f
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg
#        (-DZIGBEEPRO -DSECURE=0 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFF1
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x01, 0x03, 0x05, 0x07,
#        0x09, 0x0B, 0x0D, 0x0F, 0x00, 0x02, 0x04, 0x06, 0x08, 0x0A, 0x0C,
#        0x0D}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440) -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\Source\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\ZMain\TI2530DB\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\hal\include\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\include\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\high_level\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\mt\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\osal\include\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\services\saddr\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\services\sdata\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\af\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\nwk\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sapi\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sec\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\sys\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\stack\zdo\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\zmac\
#        -I
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\..\..\..\..\..\Components\zmac\f8w\
#        -Ohz --no_code_motion)
#    Locale             =  Chinese (Simplified)_CHN.936
#    List file          =  
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\CoordinatorEB\List\mqtt.lst
#    Object file        =  
#        C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\CC2530DB\CoordinatorEB\Obj\mqtt.r51
#
###############################################################################

C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c
      1          /**
      2          	************************************************************
      3          	************************************************************
      4          	************************************************************
      5          	*	文件名： 	onenet.c
      6          	*
      7          	*	作者： 		
      8          	*
      9          	*	日期： 		2017-05-08
     10          	*
     11          	*	版本： 		V1.1
     12          	*
     13          	*	说明： 		与onenet平台的数据交互接口层
     14          	*
     15          	*	修改记录：	V1.0：协议封装、返回判断都在同一个文件，并且不同协议接口不同。
     16          	*				V1.1：提供统一接口供应用层使用，根据不同协议文件来封装协议相关的内容。
     17          	************************************************************
     18          	************************************************************
     19          	************************************************************
     20          **/
     21          //协议文件
     22          #include "mqtt.h"
     23          #include "mqttkit.h"
     24          
     25          //C库
     26          #include <string.h>
     27          #include <stdio.h>
     28          #include "hal_led.h"
     29          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     30          uint8 packet_buff[max_packet_len]={0};
   \                     packet_buff:
   \   000000                DS 300
   \   00012C                REQUIRE __INIT_XDATA_Z
     31          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     32          char cmdid_topic[MAX_CMDID_TOPIC_LEN+1] = {0};
   \                     cmdid_topic:
   \   000000                DS 51
   \   000033                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     33          char req_payload[MAX_REQ_PAYLOAD_LEN+1] = {0};
   \                     req_payload:
   \   000000                DS 101
   \   000065                REQUIRE __INIT_XDATA_Z
     34          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
     35          unsigned char mqttUsername[30]={0};
   \                     mqttUsername:
   \   000000                DS 30
   \   00001E                REQUIRE __INIT_XDATA_Z
     36          //==========================================================
     37          //	函数名称：	OneNet_DevLink
     38          //
     39          //	函数功能：	与onenet创建连接
     40          //
     41          //	入口参数：	无
     42          //
     43          //	返回参数：	0-成功	1-失败
     44          //
     45          //	说明：		与onenet平台建立连接
     46          //==========================================================

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     47          _Bool OneNet_DevLink(void)
   \                     OneNet_DevLink:
     48          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV       A,#-0xc
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV       A,#-0xb
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
     49              MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   00000A   90....       MOV       DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>`
   \   00000D   AC..         MOV       R4,?XSP + 0
   \   00000F   AD..         MOV       R5,?XSP + 1
   \   000011   740B         MOV       A,#0xb
   \   000013   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
     50          
     51          	unsigned char *dataPtr;
     52          	
     53          	_Bool status = 1;
     54          
     55                  sprintf(mqttUsername, "%s&%s", DeviceName, ProductKey);
                                 ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "char *"
   \   000016                ; Setup parameters for call to function sprintf
   \   000016   75....       MOV       ?V0,#`?<Constant "a1sYYwS4kmH">` & 0xff
   \   000019   75....       MOV       ?V1,#(`?<Constant "a1sYYwS4kmH">` >> 8) & 0xff
   \   00001C   78..         MOV       R0,#?V0
   \   00001E   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000021   75....       MOV       ?V0,#`?<Constant "mytestdev">` & 0xff
   \   000024   75....       MOV       ?V1,#(`?<Constant "mytestdev">` >> 8) & 0xff
   \   000027   78..         MOV       R0,#?V0
   \   000029   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00002C   7C..         MOV       R4,#`?<Constant "%s&%s">` & 0xff
   \   00002E   7D..         MOV       R5,#(`?<Constant "%s&%s">` >> 8) & 0xff
   \   000030   7A..         MOV       R2,#mqttUsername & 0xff
   \   000032   7B..         MOV       R3,#(mqttUsername >> 8) & 0xff
   \   000034   12....       LCALL     `??sprintf::?relay`; Banked call to: sprintf
   \   000037   7404         MOV       A,#0x4
   \   000039   12....       LCALL     ?DEALLOC_XSTACK8
     56          //        debug( "OneNet_DevLink\r\nmqttUsername:%s, mqttPassword:%s,mqttClientId:%s\r\n", mqttUsername, mqttPassword, mqttClientId);
     57                  debug("start mqtt connet!\r\n");
   \   00003C                ; Setup parameters for call to function debug
   \   00003C   7A..         MOV       R2,#`?<Constant "start mqtt connet!\\r\\n">` & 0xff
   \   00003E   7B..         MOV       R3,#(`?<Constant "start mqtt connet!\\r\\n">` >> 8) & 0xff
   \   000040   12....       LCALL     `??debug::?relay`; Banked call to: debug
     58              //接入onenet
     59          	if(MQTT_PacketConnect(mqttUsername, mqttPassword, mqttClientId, 60, 0, MQTT_QOS_LEVEL0, NULL, NULL, 0, &mqttPacket) == 0)
                 	                      ^
Warning[Pe167]: argument of type "unsigned char *" is incompatible with
          parameter of type "int8 const *"
   \   000043                ; Setup parameters for call to function MQTT_PacketConnect
   \   000043   A8..         MOV       R0,?XSP + 0
   \   000045   A9..         MOV       R1,?XSP + 1
   \   000047   88..         MOV       ?V0,R0
   \   000049   89..         MOV       ?V1,R1
   \   00004B   78..         MOV       R0,#?V0
   \   00004D   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000050   90....       MOV       DPTR,#__Constant_0
   \   000053   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000056   E4           CLR       A
   \   000057   F5..         MOV       ?V0,A
   \   000059   F5..         MOV       ?V1,A
   \   00005B   78..         MOV       R0,#?V0
   \   00005D   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000060   78..         MOV       R0,#?V0
   \   000062   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000065   78..         MOV       R0,#?V0
   \   000067   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   00006A   75..3C       MOV       ?V0,#0x3c
   \   00006D   78..         MOV       R0,#?V0
   \   00006F   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000072   75....       MOV       ?V0,#`?<Constant "123|securemode=3,sign...">` & 0xff
   \   000075   75....       MOV       ?V1,#(`?<Constant "123|securemode=3,sign...">` >> 8) & 0xff
   \   000078   78..         MOV       R0,#?V0
   \   00007A   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00007D   7900         MOV       R1,#0x0
   \   00007F   7C..         MOV       R4,#`?<Constant "17225AC3F1B89135E1F19...">` & 0xff
   \   000081   7D..         MOV       R5,#(`?<Constant "17225AC3F1B89135E1F19...">` >> 8) & 0xff
   \   000083   7A..         MOV       R2,#mqttUsername & 0xff
   \   000085   7B..         MOV       R3,#(mqttUsername >> 8) & 0xff
   \   000087   12....       LCALL     `??MQTT_PacketConnect::?relay`; Banked call to: MQTT_PacketConnect
   \   00008A   740F         MOV       A,#0xf
   \   00008C   12....       LCALL     ?DEALLOC_XSTACK8
   \   00008F   E9           MOV       A,R1
   \   000090   7013         JNZ       ??OneNet_DevLink_0
     60          	{                                                              //原本的是256为心跳。我修改为60
     61          		ESP8266_SendData(mqttPacket._data, mqttPacket._len);			//上传平台
                 		                 ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"

  	unsigned char *dataPtr;
  	               ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",51  Warning[Pe177]: 
          variable "dataPtr" was declared but never referenced
   \   000092                ; Setup parameters for call to function ESP8266_SendData
   \   000092   7402         MOV       A,#0x2
   \   000094   12....       LCALL     ?XSTACK_DISP0_8
   \   000097   78..         MOV       R0,#?V0
   \   000099   12....       LCALL     ?L_MOV_X
   \   00009C   12....       LCALL     ?Subroutine3 & 0xFFFF
     62          		
     63          		MQTT_DeleteBuffer(&mqttPacket);								//删包
     64                          debug("mqtt conneted!\r\n");
   \                     ??CrossCallReturnLabel_2:
   \   00009F                ; Setup parameters for call to function debug
   \   00009F   7A..         MOV       R2,#`?<Constant "mqtt conneted!\\r\\n">` & 0xff
   \   0000A1   7B..         MOV       R3,#(`?<Constant "mqtt conneted!\\r\\n">` >> 8) & 0xff
   \   0000A3   8004         SJMP      ??OneNet_DevLink_1
     65          	}
     66          	else
     67          		debug("WARN:	MQTT_PacketConnect Failed\r\n");
   \                     ??OneNet_DevLink_0:
   \   0000A5                ; Setup parameters for call to function debug
   \   0000A5   7A..         MOV       R2,#`?<Constant "WARN:\\tMQTT_PacketConn...">` & 0xff
   \   0000A7   7B..         MOV       R3,#(`?<Constant "WARN:\\tMQTT_PacketConn...">` >> 8) & 0xff
   \                     ??OneNet_DevLink_1:
   \   0000A9   12....       LCALL     `??debug::?relay`; Banked call to: debug
     68          	
     69          	return status;
   \   0000AC   D3           SETB      C
   \   0000AD                REQUIRE ?Subroutine0
   \   0000AD                ; // Fall through to label ?Subroutine0
     70          	
     71          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   740B         MOV       A,#0xb
   \   000002                REQUIRE ??Subroutine6_0
   \   000002                ; // Fall through to label ??Subroutine6_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine6_0:
   \   000000   12....       LCALL     ?DEALLOC_XSTACK8
   \   000003   7F04         MOV       R7,#0x4
   \   000005   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   AC..         MOV       R4,?V0
   \   000002   AD..         MOV       R5,?V1
   \   000004   12....       LCALL     ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_4:
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   85..82       MOV       DPL,?XSP + 0
   \   000003   85..83       MOV       DPH,?XSP + 1
   \   000006   12....       LCALL     ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_7:
   \   000009                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000009                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000009                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000009                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   000009   AA..         MOV       R2,?XSP + 0
   \   00000B   AB..         MOV       R3,?XSP + 1
   \   00000D   12....       LCALL     `??MQTT_DeleteBuffer::?relay`; Banked call to: MQTT_DeleteBuffer
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   FA           MOV       R2,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   FB           MOV       R3,A
   \   000005   12....       LCALL     `??ESP8266_SendData::?relay`; Banked call to: ESP8266_SendData
   \   000008   22           RET

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2
     72          
     73          
     74          //==========================================================
     75          //	函数名称：	OneNet_RevPro
     76          //
     77          //	函数功能：	平台返回数据检测
     78          //
     79          //	入口参数：	dataPtr：平台返回的数据
     80          //
     81          //	返回参数：	无
     82          //
     83          //	说明：		
     84          //==========================================================

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     85          void OneNet_RevPro(unsigned char *cmd)
   \                     OneNet_RevPro:
     86          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV       A,#-0xc
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 16
   \   000005   74F0         MOV       A,#-0x10
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   EA           MOV       A,R2
   \   00000B   FE           MOV       R6,A
   \   00000C   EB           MOV       A,R3
   \   00000D   FF           MOV       R7,A
     87          	MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, 0};								//协议包
   \   00000E   90....       MOV       DPTR,#`?<Constant {packet_buff, 0L, 300L, 0}>`
   \   000011   7403         MOV       A,#0x3
   \   000013   12....       LCALL     ?XSTACK_DISP102_8
   \   000016   740B         MOV       A,#0xb
   \   000018   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
     88          	
     89          	unsigned short topic_len = 0;
   \   00001B   740E         MOV       A,#0xe
   \   00001D   12....       LCALL     ?XSTACK_DISP0_8
   \   000020   E4           CLR       A
   \   000021   F0           MOVX      @DPTR,A
   \   000022   A3           INC       DPTR
   \   000023   F0           MOVX      @DPTR,A
     90          	unsigned short req_len = 0;
   \   000024   04           INC       A
   \   000025   12....       LCALL     ?XSTACK_DISP0_8
   \   000028   E4           CLR       A
   \   000029   F0           MOVX      @DPTR,A
   \   00002A   A3           INC       DPTR
   \   00002B   F0           MOVX      @DPTR,A
     91          
     92          	unsigned char qos = 0;
   \   00002C   85..82       MOV       DPL,?XSP + 0
   \   00002F   85..83       MOV       DPH,?XSP + 1
   \   000032   F0           MOVX      @DPTR,A
     93          	static unsigned short pkt_id = 0;
     94          
     95              
     96          	unsigned char type = 0;
     97          	
     98          	short result = 0;
     99                  
    100          	type = MQTT_UnPacketRecv(cmd);
    101                  //解包数据led1闪烁
    102          //        P1_0 = 0; 
    103          //        HalLedBlink (HAL_LED_1, 5, 50, 500);
    104          //        P1_0 = 1;
    105          //        P1_4 = 1; //全灭
    106          //        P1_1 = 1;
    107          //        P1_0 = 1;
    108          	switch(type)
   \   000033                ; Setup parameters for call to function MQTT_UnPacketRecv
   \   000033   12....       LCALL     `??MQTT_UnPacketRecv::?relay`; Banked call to: MQTT_UnPacketRecv
   \   000036   E9           MOV       A,R1
   \   000037   24FD         ADD       A,#-0x3
   \   000039   7003         JNZ       $+5
   \   00003B   02....       LJMP      ??OneNet_RevPro_0 & 0xFFFF
   \   00003E   14           DEC       A
   \   00003F   7003         JNZ       $+5
   \   000041   02....       LJMP      ??OneNet_RevPro_1 & 0xFFFF
   \   000044   14           DEC       A
   \   000045   7003         JNZ       $+5
   \   000047   02....       LJMP      ??OneNet_RevPro_2 & 0xFFFF
   \   00004A   14           DEC       A
   \   00004B   7003         JNZ       $+5
   \   00004D   02....       LJMP      ??OneNet_RevPro_3 & 0xFFFF
   \   000050   14           DEC       A
   \   000051   7003         JNZ       $+5
   \   000053   02....       LJMP      ??OneNet_RevPro_4 & 0xFFFF
   \   000056   24FE         ADD       A,#-0x2
   \   000058   7003         JNZ       $+5
   \   00005A   02....       LJMP      ??OneNet_RevPro_5 & 0xFFFF
   \   00005D   24FE         ADD       A,#-0x2
   \   00005F   7003         JNZ       $+5
   \   000061   02....       LJMP      ??OneNet_RevPro_6 & 0xFFFF
   \   000064   24FE         ADD       A,#-0x2
   \   000066   7003         JNZ       $+5
   \   000068   02....       LJMP      ??OneNet_RevPro_7 & 0xFFFF
   \   00006B   24FE         ADD       A,#-0x2
   \   00006D   6003         JZ        $+5
   \   00006F   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    109          	{       
    110          		case MQTT_PKT_CMD://进不来															//命令下发
    111              {                   HalLedBlink (HAL_LED_2, 5, 50, 500); //可以进
   \   000072                ; Setup parameters for call to function HalLedBlink
   \   000072   7CF4         MOV       R4,#-0xc
   \   000074   7D01         MOV       R5,#0x1
   \   000076   7B32         MOV       R3,#0x32
   \   000078   7A05         MOV       R2,#0x5
   \   00007A   7902         MOV       R1,#0x2
   \   00007C   12....       LCALL     `??HalLedBlink::?relay`; Banked call to: HalLedBlink
    112          			result = MQTT_UnPacketCmd(cmd, cmdid_topic, req_payload, &req_len);	//解出topic和消息体
                 			                               ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "int8 *"

  			result = MQTT_UnPacketCmd(cmd, cmdid_topic, req_payload, &req_len);	//解出topic和消息体
  			                                            ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",112  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "int8 *"
    113          			if(result == 0)
   \   00007F                ; Setup parameters for call to function MQTT_UnPacketCmd
   \   00007F   7401         MOV       A,#0x1
   \   000081   12....       LCALL     ?XSTACK_DISP100_8
   \   000084   88..         MOV       ?V0,R0
   \   000086   89..         MOV       ?V1,R1
   \   000088   78..         MOV       R0,#?V0
   \   00008A   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00008D   75....       MOV       ?V0,#req_payload & 0xff
   \   000090   75....       MOV       ?V1,#(req_payload >> 8) & 0xff
   \   000093   78..         MOV       R0,#?V0
   \   000095   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000098   7C..         MOV       R4,#cmdid_topic & 0xff
   \   00009A   7D..         MOV       R5,#(cmdid_topic >> 8) & 0xff
   \   00009C   EE           MOV       A,R6
   \   00009D   FA           MOV       R2,A
   \   00009E   EF           MOV       A,R7
   \   00009F   FB           MOV       R3,A
   \   0000A0   12....       LCALL     `??MQTT_UnPacketCmd::?relay`; Banked call to: MQTT_UnPacketCmd
   \   0000A3   7404         MOV       A,#0x4
   \   0000A5   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000A8   E9           MOV       A,R1
   \   0000A9   6003         JZ        $+5
   \   0000AB   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    114          			{
    115          				debug("cmdid: %s, req: %s, req_len: %d\r\n", cmdid_topic, req_payload, req_len);
   \   0000AE                ; Setup parameters for call to function debug
   \   0000AE   7401         MOV       A,#0x1
   \   0000B0   12....       LCALL     ?XSTACK_DISP0_8
   \   0000B3   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   0000B6   78..         MOV       R0,#?V0
   \   0000B8   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000BB   75....       MOV       ?V0,#cmdid_topic & 0xff
   \   0000BE   75....       MOV       ?V1,#(cmdid_topic >> 8) & 0xff
   \   0000C1   78..         MOV       R0,#?V0
   \   0000C3   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000C6   7A..         MOV       R2,#`?<Constant "cmdid: %s, req: %s, r...">` & 0xff
   \   0000C8   7B..         MOV       R3,#(`?<Constant "cmdid: %s, req: %s, r...">` >> 8) & 0xff
   \   0000CA   12....       LCALL     `??debug::?relay`; Banked call to: debug
   \   0000CD   7406         MOV       A,#0x6
   \   0000CF   12....       LCALL     ?DEALLOC_XSTACK8
    116          				mqtt_rx(cmdid_topic, req_payload);
                 				        ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"

  				mqtt_rx(cmdid_topic, req_payload);
  				                     ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",116  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "uint8 *"
   \   0000D2                ; Setup parameters for call to function mqtt_rx
   \   0000D2   7C..         MOV       R4,#req_payload & 0xff
   \   0000D4   7D..         MOV       R5,#(req_payload >> 8) & 0xff
   \   0000D6   7A..         MOV       R2,#cmdid_topic & 0xff
   \   0000D8   7B..         MOV       R3,#(cmdid_topic >> 8) & 0xff
   \   0000DA   12....       LCALL     `??mqtt_rx::?relay`; Banked call to: mqtt_rx
    117          #if 1
    118          
    119          				if(MQTT_PacketCmdResp(cmdid_topic, req_payload, &mqttPacket) == 0)	//命令回复组包
                 				                      ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "int8 const *"

  				if(MQTT_PacketCmdResp(cmdid_topic, req_payload, &mqttPacket) == 0)	//命令回复组包
  				                                   ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",119  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "int8 const *"
   \   0000DD                ; Setup parameters for call to function MQTT_PacketCmdResp
   \   0000DD   7403         MOV       A,#0x3
   \   0000DF   12....       LCALL     ?XSTACK_DISP100_8
   \   0000E2   88..         MOV       ?V0,R0
   \   0000E4   89..         MOV       ?V1,R1
   \   0000E6   78..         MOV       R0,#?V0
   \   0000E8   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0000EB   7C..         MOV       R4,#req_payload & 0xff
   \   0000ED   7D..         MOV       R5,#(req_payload >> 8) & 0xff
   \   0000EF   7A..         MOV       R2,#cmdid_topic & 0xff
   \   0000F1   7B..         MOV       R3,#(cmdid_topic >> 8) & 0xff
   \   0000F3   12....       LCALL     `??MQTT_PacketCmdResp::?relay`; Banked call to: MQTT_PacketCmdResp
   \   0000F6   7402         MOV       A,#0x2
   \   0000F8   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000FB   E9           MOV       A,R1
   \   0000FC   6003         JZ        $+5
   \   0000FE   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    120          				{
    121          					debug("Tips:	Send CmdResp\r\n");
   \   000101                ; Setup parameters for call to function debug
   \   000101   7A..         MOV       R2,#`?<Constant "Tips:\\tSend CmdResp\\r\\n">` & 0xff
   \   000103   7B..         MOV       R3,#(`?<Constant "Tips:\\tSend CmdResp\\r\\n">` >> 8) & 0xff
   \   000105   02....       LJMP      ??OneNet_RevPro_9 & 0xFFFF
    122          					
    123          					ESP8266_SendData(mqttPacket._data, mqttPacket._len);			//回复命令
                 					                 ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
    124          					MQTT_DeleteBuffer(&mqttPacket);									//删包
    125          				}
    126          #endif
    127          			}
    128              }
    129          		break;
    130          			
    131          		case MQTT_PKT_PUBACK:														//发送Publish消息，平台回复的Ack
    132          		
    133          			if(MQTT_UnPacketPublishAck(cmd) == 0)
   \                     ??OneNet_RevPro_1:
   \   000108                ; Setup parameters for call to function MQTT_UnPacketPublishAck
   \   000108   EE           MOV       A,R6
   \   000109   FA           MOV       R2,A
   \   00010A   EF           MOV       A,R7
   \   00010B   FB           MOV       R3,A
   \   00010C   12....       LCALL     `??MQTT_UnPacketPublishAck::?relay`; Banked call to: MQTT_UnPacketPublishAck
   \   00010F   E9           MOV       A,R1
   \   000110   6003         JZ        $+5
   \   000112   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    134          				debug("Tips:	MQTT Publish Send OK\r\n");
   \   000115                ; Setup parameters for call to function debug
   \   000115   7A..         MOV       R2,#`?<Constant "Tips:\\tMQTT Publish Se...">` & 0xff
   \   000117   7B..         MOV       R3,#(`?<Constant "Tips:\\tMQTT Publish Se...">` >> 8) & 0xff
   \   000119   02....       LJMP      ??OneNet_RevPro_10 & 0xFFFF
    135          			
    136          		break;
    137          
    138                  case MQTT_PKT_PINGRESP:
    139                  {
    140                      debug("Tips:  HeartBeat OK\r\n");
   \                     ??OneNet_RevPro_7:
   \   00011C                ; Setup parameters for call to function debug
   \   00011C   7A..         MOV       R2,#`?<Constant "Tips:  HeartBeat OK\\r\\n">` & 0xff
   \   00011E   7B..         MOV       R3,#(`?<Constant "Tips:  HeartBeat OK\\r\\n">` >> 8) & 0xff
   \   000120   02....       LJMP      ??OneNet_RevPro_10 & 0xFFFF
    141                      break;
    142                  }
    143                  
    144                  //进不来   
    145                  case MQTT_PKT_PUBLISH:  //接收的Publish消息
    146                  {
    147          //            HalLedBlink (HAL_LED_3, 5, 50, 500); //也可以进，要注意数据长度
    148                      if(MQTT_UnPacketPublish(cmd, cmdid_topic, &topic_len, req_payload, &req_len, &qos, &pkt_id) == 0)
                                                          ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "int8 *"

              if(MQTT_UnPacketPublish(cmd, cmdid_topic, &topic_len, req_payload, &req_len, &qos, &pkt_id) == 0)
                                                                    ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",148  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "int8 *"
   \                     ??OneNet_RevPro_0:
   \   000123                ; Setup parameters for call to function MQTT_UnPacketPublish
   \   000123   75....       MOV       ?V0,#??pkt_id & 0xff
   \   000126   75....       MOV       ?V1,#(??pkt_id >> 8) & 0xff
   \   000129   78..         MOV       R0,#?V0
   \   00012B   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00012E   7402         MOV       A,#0x2
   \   000130   12....       LCALL     ?XSTACK_DISP100_8
   \   000133   88..         MOV       ?V0,R0
   \   000135   89..         MOV       ?V1,R1
   \   000137   78..         MOV       R0,#?V0
   \   000139   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00013C   7405         MOV       A,#0x5
   \   00013E   12....       LCALL     ?XSTACK_DISP100_8
   \   000141   88..         MOV       ?V0,R0
   \   000143   89..         MOV       ?V1,R1
   \   000145   78..         MOV       R0,#?V0
   \   000147   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00014A   75....       MOV       ?V0,#req_payload & 0xff
   \   00014D   75....       MOV       ?V1,#(req_payload >> 8) & 0xff
   \   000150   78..         MOV       R0,#?V0
   \   000152   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000155   7416         MOV       A,#0x16
   \   000157   12....       LCALL     ?XSTACK_DISP100_8
   \   00015A   88..         MOV       ?V0,R0
   \   00015C   89..         MOV       ?V1,R1
   \   00015E   78..         MOV       R0,#?V0
   \   000160   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000163   7C..         MOV       R4,#cmdid_topic & 0xff
   \   000165   7D..         MOV       R5,#(cmdid_topic >> 8) & 0xff
   \   000167   EE           MOV       A,R6
   \   000168   FA           MOV       R2,A
   \   000169   EF           MOV       A,R7
   \   00016A   FB           MOV       R3,A
   \   00016B   12....       LCALL     `??MQTT_UnPacketPublish::?relay`; Banked call to: MQTT_UnPacketPublish
   \   00016E   740A         MOV       A,#0xa
   \   000170   12....       LCALL     ?DEALLOC_XSTACK8
   \   000173   E9           MOV       A,R1
   \   000174   6003         JZ        $+5
   \   000176   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    149                      {
    150                          debug("topic: %s, topic_len: %d, payload: %s, payload_len: %d\r\n",cmdid_topic, topic_len, req_payload, req_len);
   \   000179                ; Setup parameters for call to function debug
   \   000179   7401         MOV       A,#0x1
   \   00017B   12....       LCALL     ?XSTACK_DISP0_8
   \   00017E   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   000181   75....       MOV       ?V0,#req_payload & 0xff
   \   000184   75....       MOV       ?V1,#(req_payload >> 8) & 0xff
   \   000187   78..         MOV       R0,#?V0
   \   000189   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00018C   7412         MOV       A,#0x12
   \   00018E   12....       LCALL     ?XSTACK_DISP0_8
   \   000191   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   000194   75....       MOV       ?V0,#cmdid_topic & 0xff
   \   000197   75....       MOV       ?V1,#(cmdid_topic >> 8) & 0xff
   \   00019A   78..         MOV       R0,#?V0
   \   00019C   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00019F   7A..         MOV       R2,#`?<Constant "topic: %s, topic_len:...">` & 0xff
   \   0001A1   7B..         MOV       R3,#(`?<Constant "topic: %s, topic_len:...">` >> 8) & 0xff
   \   0001A3   12....       LCALL     `??debug::?relay`; Banked call to: debug
   \   0001A6   7408         MOV       A,#0x8
   \   0001A8   12....       LCALL     ?DEALLOC_XSTACK8
    151                          mqtt_rx(cmdid_topic, req_payload);
                                         ^
Warning[Pe167]: argument of type "char *" is incompatible with parameter of
          type "uint8 *"

                  mqtt_rx(cmdid_topic, req_payload);
                                       ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",151  Warning[Pe167]: 
          argument of type "char *" is incompatible with parameter of type
          "uint8 *"
   \   0001AB                ; Setup parameters for call to function mqtt_rx
   \   0001AB   7C..         MOV       R4,#req_payload & 0xff
   \   0001AD   7D..         MOV       R5,#(req_payload >> 8) & 0xff
   \   0001AF   7A..         MOV       R2,#cmdid_topic & 0xff
   \   0001B1   7B..         MOV       R3,#(cmdid_topic >> 8) & 0xff
   \   0001B3   12....       LCALL     `??mqtt_rx::?relay`; Banked call to: mqtt_rx
    152          
    153                         // MQTT_FreeBuffer(cmdid_topic);
    154                         // MQTT_FreeBuffer(req_payload);        
    155          
    156                          switch(qos)
   \   0001B6   85..82       MOV       DPL,?XSP + 0
   \   0001B9   85..83       MOV       DPH,?XSP + 1
   \   0001BC   E0           MOVX      A,@DPTR
   \   0001BD   14           DEC       A
   \   0001BE   6006         JZ        ??OneNet_RevPro_11
   \   0001C0   14           DEC       A
   \   0001C1   601F         JZ        ??OneNet_RevPro_12
   \   0001C3   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    157                          {
    158                              case 1:                                                         //收到publish的qos为1，设备需要回复Ack
    159                              {
    160                                  if(MQTT_PacketPublishAck(pkt_id, &mqttPacket) == 0)
   \                     ??OneNet_RevPro_11:
   \   0001C6                ; Setup parameters for call to function MQTT_PacketPublishAck
   \   0001C6   7403         MOV       A,#0x3
   \   0001C8   12....       LCALL     ?XSTACK_DISP102_8
   \   0001CB   90....       MOV       DPTR,#??pkt_id
   \   0001CE   E0           MOVX      A,@DPTR
   \   0001CF   FA           MOV       R2,A
   \   0001D0   A3           INC       DPTR
   \   0001D1   E0           MOVX      A,@DPTR
   \   0001D2   FB           MOV       R3,A
   \   0001D3   12....       LCALL     `??MQTT_PacketPublishAck::?relay`; Banked call to: MQTT_PacketPublishAck
   \   0001D6   E9           MOV       A,R1
   \   0001D7   6003         JZ        $+5
   \   0001D9   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    161                                  {
    162                                      debug("Tips:  Send PublishAck\r\n");
   \   0001DC                ; Setup parameters for call to function debug
   \   0001DC   7A..         MOV       R2,#`?<Constant "Tips:  Send PublishAck\\r\\n">` & 0xff
   \   0001DE   7B..         MOV       R3,#(`?<Constant "Tips:  Send PublishAck\\r\\n">` >> 8) & 0xff
   \   0001E0   8074         SJMP      ??OneNet_RevPro_9
    163                                      ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                              ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
    164                                      MQTT_DeleteBuffer(&mqttPacket);
    165                                  }
    166                                  break;
    167                              }
    168                              case 2: //收到publish的qos为2，设备先回复Rec
    169                              {       //平台回复Rel，设备再回复Comp
    170                                  if(MQTT_PacketPublishRec(pkt_id, &mqttPacket) == 0)
   \                     ??OneNet_RevPro_12:
   \   0001E2                ; Setup parameters for call to function MQTT_PacketPublishRec
   \   0001E2   7403         MOV       A,#0x3
   \   0001E4   12....       LCALL     ?XSTACK_DISP102_8
   \   0001E7   90....       MOV       DPTR,#??pkt_id
   \   0001EA   E0           MOVX      A,@DPTR
   \   0001EB   FA           MOV       R2,A
   \   0001EC   A3           INC       DPTR
   \   0001ED   E0           MOVX      A,@DPTR
   \   0001EE   FB           MOV       R3,A
   \   0001EF   12....       LCALL     `??MQTT_PacketPublishRec::?relay`; Banked call to: MQTT_PacketPublishRec
   \   0001F2   E9           MOV       A,R1
   \   0001F3   6003         JZ        $+5
   \   0001F5   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    171                                  {
    172                                      debug("Tips:  Send PublishRec\r\n");
   \   0001F8                ; Setup parameters for call to function debug
   \   0001F8   7A..         MOV       R2,#`?<Constant "Tips:  Send PublishRec\\r\\n">` & 0xff
   \   0001FA   7B..         MOV       R3,#(`?<Constant "Tips:  Send PublishRec\\r\\n">` >> 8) & 0xff
   \   0001FC   8058         SJMP      ??OneNet_RevPro_9
    173                                      ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                              ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
    174                                      MQTT_DeleteBuffer(&mqttPacket);
    175                                  }
    176                                  break;
    177                              }
    178                              default:
    179                                  break;
    180                          }
    181                          
    182                      }
    183                      break;
    184                  }
    185                  case MQTT_PKT_PUBREC:   //发送Publish消息，平台回复的Rec，设备需回复Rel消息
    186                  {
    187                      if(MQTT_UnPacketPublishRec(cmd) == 0)
   \                     ??OneNet_RevPro_2:
   \   0001FE                ; Setup parameters for call to function MQTT_UnPacketPublishRec
   \   0001FE   EE           MOV       A,R6
   \   0001FF   FA           MOV       R2,A
   \   000200   EF           MOV       A,R7
   \   000201   FB           MOV       R3,A
   \   000202   12....       LCALL     `??MQTT_UnPacketPublishRec::?relay`; Banked call to: MQTT_UnPacketPublishRec
   \   000205   E9           MOV       A,R1
   \   000206   6003         JZ        $+5
   \   000208   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    188                      {
    189                          debug("Tips:  Rev PublishRec\r\n");
   \   00020B                ; Setup parameters for call to function debug
   \   00020B   7A..         MOV       R2,#`?<Constant "Tips:  Rev PublishRec\\r\\n">` & 0xff
   \   00020D   7B..         MOV       R3,#(`?<Constant "Tips:  Rev PublishRec\\r\\n">` >> 8) & 0xff
   \   00020F   12....       LCALL     `??debug::?relay`; Banked call to: debug
    190                          if(MQTT_PacketPublishRel(MQTT_PUBLISH_ID, &mqttPacket) == 0)
   \   000212                ; Setup parameters for call to function MQTT_PacketPublishRel
   \   000212   7403         MOV       A,#0x3
   \   000214   12....       LCALL     ?XSTACK_DISP102_8
   \   000217   7A0A         MOV       R2,#0xa
   \   000219   7B00         MOV       R3,#0x0
   \   00021B   12....       LCALL     `??MQTT_PacketPublishRel::?relay`; Banked call to: MQTT_PacketPublishRel
   \   00021E   E9           MOV       A,R1
   \   00021F   6003         JZ        $+5
   \   000221   02....       LJMP      ??OneNet_RevPro_8 & 0xFFFF
    191                          {
    192                              debug("Tips:  Send PublishRel\r\n");
   \   000224                ; Setup parameters for call to function debug
   \   000224   7A..         MOV       R2,#`?<Constant "Tips:  Send PublishRel\\r\\n">` & 0xff
   \   000226   7B..         MOV       R3,#(`?<Constant "Tips:  Send PublishRel\\r\\n">` >> 8) & 0xff
   \   000228   802C         SJMP      ??OneNet_RevPro_9
    193                              ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
    194                              MQTT_DeleteBuffer(&mqttPacket);
    195                          }
    196                      }
    197                      break;
    198                  }   
    199                  case MQTT_PKT_PUBREL://收到Publish消息，设备回复Rec后，平台回复的Rel，设备需再回复Comp
    200                  {
    201                      if(MQTT_UnPacketPublishRel(cmd, pkt_id) == 0)
   \                     ??OneNet_RevPro_3:
   \   00022A                ; Setup parameters for call to function MQTT_UnPacketPublishRel
   \   00022A   90....       MOV       DPTR,#??pkt_id
   \   00022D   E0           MOVX      A,@DPTR
   \   00022E   FC           MOV       R4,A
   \   00022F   A3           INC       DPTR
   \   000230   E0           MOVX      A,@DPTR
   \   000231   FD           MOV       R5,A
   \   000232   EE           MOV       A,R6
   \   000233   FA           MOV       R2,A
   \   000234   EF           MOV       A,R7
   \   000235   FB           MOV       R3,A
   \   000236   12....       LCALL     `??MQTT_UnPacketPublishRel::?relay`; Banked call to: MQTT_UnPacketPublishRel
   \   000239   E9           MOV       A,R1
   \   00023A   707A         JNZ       ??OneNet_RevPro_8
    202                      {
    203                          debug("Tips:  Rev PublishRel\r\n");
   \   00023C                ; Setup parameters for call to function debug
   \   00023C   7A..         MOV       R2,#`?<Constant "Tips:  Rev PublishRel\\r\\n">` & 0xff
   \   00023E   7B..         MOV       R3,#(`?<Constant "Tips:  Rev PublishRel\\r\\n">` >> 8) & 0xff
   \   000240   12....       LCALL     `??debug::?relay`; Banked call to: debug
    204                          if(MQTT_PacketPublishComp(MQTT_PUBLISH_ID, &mqttPacket) == 0)
   \   000243                ; Setup parameters for call to function MQTT_PacketPublishComp
   \   000243   7403         MOV       A,#0x3
   \   000245   12....       LCALL     ?XSTACK_DISP102_8
   \   000248   7A0A         MOV       R2,#0xa
   \   00024A   7B00         MOV       R3,#0x0
   \   00024C   12....       LCALL     `??MQTT_PacketPublishComp::?relay`; Banked call to: MQTT_PacketPublishComp
   \   00024F   E9           MOV       A,R1
   \   000250   7064         JNZ       ??OneNet_RevPro_8
    205                          {
    206                             debug("Tips:  Send PublishComp\r\n");
   \   000252                ; Setup parameters for call to function debug
   \   000252   7A..         MOV       R2,#`?<Constant "Tips:  Send PublishCo...">` & 0xff
   \   000254   7B..         MOV       R3,#(`?<Constant "Tips:  Send PublishCo...">` >> 8) & 0xff
   \                     ??OneNet_RevPro_9:
   \   000256   12....       LCALL     `??debug::?relay`; Banked call to: debug
    207                              ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000259                ; Setup parameters for call to function ESP8266_SendData
   \   000259   7405         MOV       A,#0x5
   \   00025B   12....       LCALL     ?XSTACK_DISP0_8
   \   00025E   78..         MOV       R0,#?V0
   \   000260   12....       LCALL     ?L_MOV_X
   \   000263   AC..         MOV       R4,?V0
   \   000265   AD..         MOV       R5,?V1
   \   000267   7403         MOV       A,#0x3
   \   000269   12....       LCALL     ?XSTACK_DISP0_8
   \   00026C   12....       LCALL     ?Subroutine5 & 0xFFFF
    208                              MQTT_DeleteBuffer(&mqttPacket);
   \                     ??CrossCallReturnLabel_6:
   \   00026F                ; Setup parameters for call to function MQTT_DeleteBuffer
   \   00026F   7403         MOV       A,#0x3
   \   000271   12....       LCALL     ?XSTACK_DISP101_8
   \   000274   12....       LCALL     `??MQTT_DeleteBuffer::?relay`; Banked call to: MQTT_DeleteBuffer
   \   000277   803D         SJMP      ??OneNet_RevPro_8
    209                          }
    210                      }
    211                      break;
    212                  }
    213                  case MQTT_PKT_PUBCOMP:  //发送Publish消息，平台返回Rec，设备回复Rel，平台再返回的Comp
    214                  {
    215                      if(MQTT_UnPacketPublishComp(cmd) == 0)
   \                     ??OneNet_RevPro_4:
   \   000279                ; Setup parameters for call to function MQTT_UnPacketPublishComp
   \   000279   EE           MOV       A,R6
   \   00027A   FA           MOV       R2,A
   \   00027B   EF           MOV       A,R7
   \   00027C   FB           MOV       R3,A
   \   00027D   12....       LCALL     `??MQTT_UnPacketPublishComp::?relay`; Banked call to: MQTT_UnPacketPublishComp
   \   000280   E9           MOV       A,R1
   \   000281   7033         JNZ       ??OneNet_RevPro_8
    216                      {
    217                          debug("Tips:  Rev PublishComp\r\n");
   \   000283                ; Setup parameters for call to function debug
   \   000283   7A..         MOV       R2,#`?<Constant "Tips:  Rev PublishComp\\r\\n">` & 0xff
   \   000285   7B..         MOV       R3,#(`?<Constant "Tips:  Rev PublishComp\\r\\n">` >> 8) & 0xff
   \   000287   802A         SJMP      ??OneNet_RevPro_10
    218                      }
    219                      break;
    220                  }
    221                  case MQTT_PKT_SUBACK:   //发送Subscribe消息的Ack
    222                  {
    223                      if(MQTT_UnPacketSubscribe(cmd) == 0)
   \                     ??OneNet_RevPro_5:
   \   000289                ; Setup parameters for call to function MQTT_UnPacketSubscribe
   \   000289   EE           MOV       A,R6
   \   00028A   FA           MOV       R2,A
   \   00028B   EF           MOV       A,R7
   \   00028C   FB           MOV       R3,A
   \   00028D   12....       LCALL     `??MQTT_UnPacketSubscribe::?relay`; Banked call to: MQTT_UnPacketSubscribe
   \   000290   E9           MOV       A,R1
   \   000291   7006         JNZ       ??OneNet_RevPro_13
    224                      {
    225                          debug("Tips:  MQTT Subscribe OK\r\n");
   \   000293                ; Setup parameters for call to function debug
   \   000293   7A..         MOV       R2,#`?<Constant "Tips:  MQTT Subscribe...">` & 0xff
   \   000295   7B..         MOV       R3,#(`?<Constant "Tips:  MQTT Subscribe...">` >> 8) & 0xff
   \   000297   801A         SJMP      ??OneNet_RevPro_10
    226                      }
    227                      else
    228                      {
    229                          debug("Tips:  MQTT Subscribe Err\r\n");
   \                     ??OneNet_RevPro_13:
   \   000299                ; Setup parameters for call to function debug
   \   000299   7A..         MOV       R2,#`?<Constant "Tips:  MQTT Subscribe...">_1` & 0xff
   \   00029B   7B..         MOV       R3,#(`?<Constant "Tips:  MQTT Subscribe...">_1` >> 8) & 0xff
   \   00029D   8014         SJMP      ??OneNet_RevPro_10
    230                      }
    231                      break;
    232                  }
    233                  case MQTT_PKT_UNSUBACK: //发送UnSubscribe消息的Ack
    234                  {
    235                      if(MQTT_UnPacketUnSubscribe(cmd) == 0)
   \                     ??OneNet_RevPro_6:
   \   00029F                ; Setup parameters for call to function MQTT_UnPacketUnSubscribe
   \   00029F   EE           MOV       A,R6
   \   0002A0   FA           MOV       R2,A
   \   0002A1   EF           MOV       A,R7
   \   0002A2   FB           MOV       R3,A
   \   0002A3   12....       LCALL     `??MQTT_UnPacketUnSubscribe::?relay`; Banked call to: MQTT_UnPacketUnSubscribe
   \   0002A6   E9           MOV       A,R1
   \   0002A7   7006         JNZ       ??OneNet_RevPro_14
    236                      {
    237                          debug("Tips:  MQTT UnSubscribe OK\r\n");
   \   0002A9                ; Setup parameters for call to function debug
   \   0002A9   7A..         MOV       R2,#`?<Constant "Tips:  MQTT UnSubscri...">` & 0xff
   \   0002AB   7B..         MOV       R3,#(`?<Constant "Tips:  MQTT UnSubscri...">` >> 8) & 0xff
   \   0002AD   8004         SJMP      ??OneNet_RevPro_10
    238                      }
    239                      else
    240                      {
    241                          debug("Tips:  MQTT UnSubscribe Err\r\n");
   \                     ??OneNet_RevPro_14:
   \   0002AF                ; Setup parameters for call to function debug
   \   0002AF   7A..         MOV       R2,#`?<Constant "Tips:  MQTT UnSubscri...">_1` & 0xff
   \   0002B1   7B..         MOV       R3,#(`?<Constant "Tips:  MQTT UnSubscri...">_1` >> 8) & 0xff
   \                     ??OneNet_RevPro_10:
   \   0002B3   12....       LCALL     `??debug::?relay`; Banked call to: debug
    242                      }
    243                      break;
    244                  } 		
    245          		default:
    246          			result = -1;
    247          		break;
    248          	}
    249          }
   \                     ??OneNet_RevPro_8:
   \   0002B6   7410         MOV       A,#0x10
   \   0002B8   02....       LJMP      ??Subroutine6_0 & 0xFFFF

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 0}>`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   00           DB 0

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??pkt_id:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    250          
    251          /**************************************************************
    252          函数名称 : onenet_mqtt_send_heart
    253          函数功能 : 发送心跳
    254          输入参数 : 无
    255          返回值  	 : 无
    256          备注		 : 无
    257          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    258          void onenet_mqtt_send_heart(void)
   \                     onenet_mqtt_send_heart:
    259          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV       A,#-0xc
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV       A,#-0xb
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
    260              MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   00000A   90....       MOV       DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_1`
   \   00000D   AC..         MOV       R4,?XSP + 0
   \   00000F   AD..         MOV       R5,?XSP + 1
   \   000011   740B         MOV       A,#0xb
   \   000013   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
    261          
    262          	debug("send heart\r\n");
   \   000016                ; Setup parameters for call to function debug
   \   000016   7A..         MOV       R2,#`?<Constant "send heart\\r\\n">` & 0xff
   \   000018   7B..         MOV       R3,#(`?<Constant "send heart\\r\\n">` >> 8) & 0xff
   \   00001A   12....       LCALL     `??debug::?relay`; Banked call to: debug
    263          	MQTT_PacketPing(&mqttPacket);
   \   00001D                ; Setup parameters for call to function MQTT_PacketPing
   \   00001D   AA..         MOV       R2,?XSP + 0
   \   00001F   AB..         MOV       R3,?XSP + 1
   \   000021   12....       LCALL     `??MQTT_PacketPing::?relay`; Banked call to: MQTT_PacketPing
    264              ESP8266_SendData(mqttPacket._data, mqttPacket._len);
                                      ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000024                ; Setup parameters for call to function ESP8266_SendData
   \   000024   7402         MOV       A,#0x2
   \   000026   12....       LCALL     ?XSTACK_DISP0_8
   \   000029   78..         MOV       R0,#?V0
   \   00002B   12....       LCALL     ?L_MOV_X
   \   00002E   12....       LCALL     ?Subroutine3 & 0xFFFF
    265          	MQTT_DeleteBuffer(&mqttPacket);									//删包
    266          }
   \                     ??CrossCallReturnLabel_3:
   \   000031   02....       LJMP      ?Subroutine0 & 0xFFFF

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_1`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2
    267          
    268          
    269          /**************************************************************
    270          函数名称 : mqtt_publish_topic
    271          函数功能 : onenet mqtt 发布主题消息
    272          输入参数 : topic：发布的主题
    273          		   msg：消息内容
    274          返回值  	 : PUBLISH_MSG_OK: 发布消息成功
    275          		   PUBLISH_MSG_ERROR：发布消息失败
    276          备注		 : 无
    277          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    278          _Bool mqtt_publish_topic(const char *topic, const char *msg)
   \                     mqtt_publish_topic:
    279          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV       A,#-0xb
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   8A..         MOV       ?V2,R2
   \   00000C   8B..         MOV       ?V3,R3
   \   00000E   8C..         MOV       ?V0,R4
   \   000010   8D..         MOV       ?V1,R5
    280            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   000012   90....       MOV       DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_2`
   \   000015   AC..         MOV       R4,?XSP + 0
   \   000017   AD..         MOV       R5,?XSP + 1
   \   000019   740B         MOV       A,#0xb
   \   00001B   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
    281          	
    282          	debug("publish topic: %s, msg: %s\r\n", topic, msg);
   \   00001E                ; Setup parameters for call to function debug
   \   00001E   78..         MOV       R0,#?V0
   \   000020   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000023   78..         MOV       R0,#?V2
   \   000025   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000028   7A..         MOV       R2,#`?<Constant "publish topic: %s, ms...">` & 0xff
   \   00002A   7B..         MOV       R3,#(`?<Constant "publish topic: %s, ms...">` >> 8) & 0xff
   \   00002C   12....       LCALL     `??debug::?relay`; Banked call to: debug
   \   00002F   7404         MOV       A,#0x4
   \   000031   12....       LCALL     ?DEALLOC_XSTACK8
    283          
    284          	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, topic, msg, strlen(msg), MQTT_QOS_LEVEL2, 0, 1, &mqttPacket) == 0)
                 	                                       ^
Warning[Pe167]: argument of type "char const *" is incompatible with parameter
          of type "int8 const *"

  	if(MQTT_PacketPublish(MQTT_PUBLISH_ID, topic, msg, strlen(msg), MQTT_QOS_LEVEL2, 0, 1, &mqttPacket) == 0)
  	                                              ^
"C:\Users\OY\Desktop\ing\new\ZStack-2.5.1a\Projects\zstack\Samples\SampleApp\Source\mqtt.c",284  Warning[Pe167]: 
          argument of type "char const *" is incompatible with parameter of
          type "int8 const *"
   \   000034                ; Setup parameters for call to function strlen
   \   000034   AA..         MOV       R2,?V0
   \   000036   AB..         MOV       R3,?V1
   \   000038   12....       LCALL     `??strlen::?relay`; Banked call to: strlen
   \   00003B   8A..         MOV       ?V4,R2
   \   00003D   8B..         MOV       ?V5,R3
   \   00003F                ; Setup parameters for call to function MQTT_PacketPublish
   \   00003F   A8..         MOV       R0,?XSP + 0
   \   000041   A9..         MOV       R1,?XSP + 1
   \   000043   88..         MOV       ?V6,R0
   \   000045   89..         MOV       ?V7,R1
   \   000047   78..         MOV       R0,#?V6
   \   000049   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00004C   90....       MOV       DPTR,#__Constant_1
   \   00004F   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000052   90....       MOV       DPTR,#__Constant_0
   \   000055   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000058   E4           CLR       A
   \   000059   F5..         MOV       ?V6,A
   \   00005B   F5..         MOV       ?V7,A
   \   00005D   78..         MOV       R0,#?V4
   \   00005F   12....       LCALL     ?PUSH_XSTACK_I_FOUR
   \   000062   78..         MOV       R0,#?V0
   \   000064   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000067   7902         MOV       R1,#0x2
   \   000069   AC..         MOV       R4,?V2
   \   00006B   AD..         MOV       R5,?V3
   \   00006D   7A0A         MOV       R2,#0xa
   \   00006F   7B00         MOV       R3,#0x0
   \   000071   12....       LCALL     `??MQTT_PacketPublish::?relay`; Banked call to: MQTT_PacketPublish
   \   000074   7410         MOV       A,#0x10
   \   000076   12....       LCALL     ?DEALLOC_XSTACK8
   \   000079   E9           MOV       A,R1
   \   00007A   7013         JNZ       ??mqtt_publish_topic_0
    285          	{
    286          		ESP8266_SendData(mqttPacket._data, mqttPacket._len);//上传平台
                 		                 ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   00007C                ; Setup parameters for call to function ESP8266_SendData
   \   00007C   7402         MOV       A,#0x2
   \   00007E   12....       LCALL     ?XSTACK_DISP0_8
   \   000081   78..         MOV       R0,#?V0
   \   000083   12....       LCALL     ?L_MOV_X
   \   000086   AC..         MOV       R4,?V0
   \   000088   AD..         MOV       R5,?V1
   \   00008A   12....       LCALL     ?Subroutine2 & 0xFFFF
    287          		MQTT_DeleteBuffer(&mqttPacket);	//删包
    288          		return 0;
    289          	}
   \                     ??CrossCallReturnLabel_0:
   \   00008D   8001         SJMP      ??mqtt_publish_topic_1
    290          	else
    291          	{
    292          		return 1;
   \                     ??mqtt_publish_topic_0:
   \   00008F   D3           SETB      C
    293          	}
   \                     ??mqtt_publish_topic_1:
   \   000090                REQUIRE ?Subroutine1
   \   000090                ; // Fall through to label ?Subroutine1
    294          
    295          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   740B         MOV       A,#0xb
   \   000002   12....       LCALL     ?DEALLOC_XSTACK8
   \   000005   7F08         MOV       R7,#0x8
   \   000007   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL     ?Subroutine4 & 0xFFFF
   \                     ??CrossCallReturnLabel_5:
   \   000003   C3           CLR       C
   \   000004   22           RET

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_2`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2
    296          
    297          /*  发布主题为"hello_topic"，消息为"hello_world" */
    298          //if(0 == onenet_mqtt_publish_topic("hello_topic", "hello_world"))
    299          //{;}
    300          
    301           
    302          /**************************************************************
    303          函数名称 : onenet_mqtt_subscribe_topic
    304          函数功能 : onenet mqtt 订阅主题
    305          输入参数 : topic：订阅的topic
    306          		   topic_cnt：topic个数
    307          返回值  	 : SUBSCRIBE_TOPIC_OK:订阅成功 0
    308          		   SUBSCRIBE_TOPIC_ERROR：订阅失败 其他
    309          备注		 : 无
    310          **************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    311          _Bool mqtt_subscribe_topic(const signed char *topic[], unsigned char topic_cnt)
   \                     mqtt_subscribe_topic:
    312          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 11
   \   000005   74F5         MOV       A,#-0xb
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   EA           MOV       A,R2
   \   00000B   FE           MOV       R6,A
   \   00000C   EB           MOV       A,R3
   \   00000D   FF           MOV       R7,A
   \   00000E   89..         MOV       ?V0,R1
    313          	
    314          	unsigned char i = 0;
   \   000010   75..00       MOV       ?V1,#0x0
    315            MQTT_PACKET_STRUCTURE mqttPacket = {packet_buff, 0, max_packet_len, MEM_FLAG_STATIC};                //协议包
   \   000013   90....       MOV       DPTR,#`?<Constant {packet_buff, 0L, 300L, 2}>_3`
   \   000016   AC..         MOV       R4,?XSP + 0
   \   000018   AD..         MOV       R5,?XSP + 1
   \   00001A   740B         MOV       A,#0xb
   \   00001C   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
    316           
    317          	for(i=0; i < topic_cnt; i++)
   \   00001F   8021         SJMP      ??mqtt_subscribe_topic_0
    318          	{
    319          		debug("subscribe topic: %s\r\n", topic[i]);
   \                     ??mqtt_subscribe_topic_1:
   \   000021                ; Setup parameters for call to function debug
   \   000021   A8..         MOV       R0,?V1
   \   000023   E8           MOV       A,R0
   \   000024   28           ADD       A,R0
   \   000025   F8           MOV       R0,A
   \   000026   E4           CLR       A
   \   000027   33           RLC       A
   \   000028   F9           MOV       R1,A
   \   000029   EE           MOV       A,R6
   \   00002A   28           ADD       A,R0
   \   00002B   F582         MOV       DPL,A
   \   00002D   EF           MOV       A,R7
   \   00002E   39           ADDC      A,R1
   \   00002F   F583         MOV       DPH,A
   \   000031   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   000034   7A..         MOV       R2,#`?<Constant "subscribe topic: %s\\r\\n">` & 0xff
   \   000036   7B..         MOV       R3,#(`?<Constant "subscribe topic: %s\\r\\n">` >> 8) & 0xff
   \   000038   12....       LCALL     `??debug::?relay`; Banked call to: debug
   \   00003B   7402         MOV       A,#0x2
   \   00003D   12....       LCALL     ?DEALLOC_XSTACK8
    320          	}
   \   000040   05..         INC       ?V1
   \                     ??mqtt_subscribe_topic_0:
   \   000042   E5..         MOV       A,?V1
   \   000044   C3           CLR       C
   \   000045   95..         SUBB      A,?V0
   \   000047   40D8         JC        ??mqtt_subscribe_topic_1
    321              
    322          	if(MQTT_PacketSubscribe(MQTT_SUBSCRIBE_ID, MQTT_QOS_LEVEL2, topic, topic_cnt, &mqttPacket) == 0)
   \   000049                ; Setup parameters for call to function MQTT_PacketSubscribe
   \   000049   A8..         MOV       R0,?XSP + 0
   \   00004B   A9..         MOV       R1,?XSP + 1
   \   00004D   88..         MOV       ?V2,R0
   \   00004F   89..         MOV       ?V3,R1
   \   000051   78..         MOV       R0,#?V2
   \   000053   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000056   E5..         MOV       A,?V0
   \   000058   F5..         MOV       ?V1,A
   \   00005A   78..         MOV       R0,#?V1
   \   00005C   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   00005F   EE           MOV       A,R6
   \   000060   FC           MOV       R4,A
   \   000061   EF           MOV       A,R7
   \   000062   FD           MOV       R5,A
   \   000063   7902         MOV       R1,#0x2
   \   000065   7A14         MOV       R2,#0x14
   \   000067   7B00         MOV       R3,#0x0
   \   000069   12....       LCALL     `??MQTT_PacketSubscribe::?relay`; Banked call to: MQTT_PacketSubscribe
   \   00006C   7403         MOV       A,#0x3
   \   00006E   12....       LCALL     ?DEALLOC_XSTACK8
   \   000071   E9           MOV       A,R1
   \   000072   7013         JNZ       ??mqtt_subscribe_topic_2
    323          	{
    324          		ESP8266_SendData(mqttPacket._data, mqttPacket._len);//上传平台
                 		                 ^
Warning[Pe167]: argument of type "uint8 *" is incompatible with parameter of
          type "char *"
   \   000074                ; Setup parameters for call to function ESP8266_SendData
   \   000074   7402         MOV       A,#0x2
   \   000076   12....       LCALL     ?XSTACK_DISP0_8
   \   000079   78..         MOV       R0,#?V4
   \   00007B   12....       LCALL     ?L_MOV_X
   \   00007E   AC..         MOV       R4,?V4
   \   000080   AD..         MOV       R5,?V5
   \   000082   12....       LCALL     ?Subroutine2 & 0xFFFF
    325          		MQTT_DeleteBuffer(&mqttPacket);											//删包
    326          		return 0;
    327          	}
   \                     ??CrossCallReturnLabel_1:
   \   000085   8001         SJMP      ??mqtt_subscribe_topic_3
    328          	else
    329          	{
    330          		return 1;
   \                     ??mqtt_subscribe_topic_2:
   \   000087   D3           SETB      C
    331          	}
   \                     ??mqtt_subscribe_topic_3:
   \   000088   02....       LJMP      ?Subroutine1 & 0xFFFF
    332          }

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {packet_buff, 0L, 300L, 2}>_3`:
   \   000000   ....         DW packet_buff
   \   000002   00000000     DD 0
   \   000006   2C010000     DD 300
   \   00000A   02           DB 2

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "%s&%s">`:
   \   000000   25732625     DB "%s&%s"
   \            7300    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "mytestdev">`:
   \   000000   6D797465     DB "mytestdev"
   \            73746465
   \            7600    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "a1sYYwS4kmH">`:
   \   000000   61317359     DB "a1sYYwS4kmH"
   \            59775334
   \            6B6D4800

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "start mqtt connet!\\r\\n">`:
   \   000000   73746172     DB "start mqtt connet!\015\012"
   \            74206D71
   \            74742063
   \            6F6E6E65
   \            74210D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "17225AC3F1B89135E1F19...">`:
   \   000000   31373232     DB "17225AC3F1B89135E1F193716E99000171405856"
   \            35414333
   \            46314238
   \            39313335
   \            45314631
   \            39333731
   \            36453939
   \            30303031
   \            37313430
   \            35383536
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "123|securemode=3,sign...">`:
   \   000000   3132337C     DB "123|securemode=3,signmethod=hmacsha1|"
   \            73656375
   \            72656D6F
   \            64653D33
   \            2C736967
   \            6E6D6574
   \            686F643D
   \            686D6163
   \            73686131
   \            7C00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "mqtt conneted!\\r\\n">`:
   \   000000   6D717474     DB "mqtt conneted!\015\012"
   \            20636F6E
   \            6E657465
   \            64210D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "WARN:\\tMQTT_PacketConn...">`:
   \   000000   5741524E     DB "WARN:\tMQTT_PacketConnect Failed\015\012"
   \            3A094D51
   \            54545F50
   \            61636B65
   \            74436F6E
   \            6E656374
   \            20466169
   \            6C65640D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "cmdid: %s, req: %s, r...">`:
   \   000000   636D6469     DB "cmdid: %s, req: %s, req_len: %d\015\012"
   \            643A2025
   \            732C2072
   \            65713A20
   \            25732C20
   \            7265715F
   \            6C656E3A
   \            2025640D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:\\tSend CmdResp\\r\\n">`:
   \   000000   54697073     DB "Tips:\tSend CmdResp\015\012"
   \            3A095365
   \            6E642043
   \            6D645265
   \            73700D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:\\tMQTT Publish Se...">`:
   \   000000   54697073     DB "Tips:\tMQTT Publish Send OK\015\012"
   \            3A094D51
   \            54542050
   \            75626C69
   \            73682053
   \            656E6420
   \            4F4B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  HeartBeat OK\\r\\n">`:
   \   000000   54697073     DB "Tips:  HeartBeat OK\015\012"
   \            3A202048
   \            65617274
   \            42656174
   \            204F4B0D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "topic: %s, topic_len:...">`:
   \   000000   746F7069     DB 74H, 6FH, 70H, 69H, 63H, 3AH, 20H, 25H
   \            633A2025
   \   000008   732C2074     DB 73H, 2CH, 20H, 74H, 6FH, 70H, 69H, 63H
   \            6F706963
   \   000010   5F6C656E     DB 5FH, 6CH, 65H, 6EH, 3AH, 20H, 25H, 64H
   \            3A202564
   \   000018   2C207061     DB 2CH, 20H, 70H, 61H, 79H, 6CH, 6FH, 61H
   \            796C6F61
   \   000020   643A2025     DB 64H, 3AH, 20H, 25H, 73H, 2CH, 20H, 70H
   \            732C2070
   \   000028   61796C6F     DB 61H, 79H, 6CH, 6FH, 61H, 64H, 5FH, 6CH
   \            61645F6C
   \   000030   656E3A20     DB 65H, 6EH, 3AH, 20H, 25H, 64H, 0DH, 0AH
   \            25640D0A
   \   000038   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishAck\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishAck\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736841
   \            636B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishRec\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishRec\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736852
   \            65630D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishRec\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishRec\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            73685265
   \            630D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishRel\\r\\n">`:
   \   000000   54697073     DB "Tips:  Send PublishRel\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736852
   \            656C0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishRel\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishRel\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            73685265
   \            6C0D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Send PublishCo...">`:
   \   000000   54697073     DB "Tips:  Send PublishComp\015\012"
   \            3A202053
   \            656E6420
   \            5075626C
   \            69736843
   \            6F6D700D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  Rev PublishComp\\r\\n">`:
   \   000000   54697073     DB "Tips:  Rev PublishComp\015\012"
   \            3A202052
   \            65762050
   \            75626C69
   \            7368436F
   \            6D700D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT Subscribe...">`:
   \   000000   54697073     DB "Tips:  MQTT Subscribe OK\015\012"
   \            3A20204D
   \            51545420
   \            53756273
   \            63726962
   \            65204F4B
   \            0D0A00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT Subscribe...">_1`:
   \   000000   54697073     DB "Tips:  MQTT Subscribe Err\015\012"
   \            3A20204D
   \            51545420
   \            53756273
   \            63726962
   \            65204572
   \            720D0A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT UnSubscri...">`:
   \   000000   54697073     DB "Tips:  MQTT UnSubscribe OK\015\012"
   \            3A20204D
   \            51545420
   \            556E5375
   \            62736372
   \            69626520
   \            4F4B0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Tips:  MQTT UnSubscri...">_1`:
   \   000000   54697073     DB "Tips:  MQTT UnSubscribe Err\015\012"
   \            3A20204D
   \            51545420
   \            556E5375
   \            62736372
   \            69626520
   \            4572720D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "send heart\\r\\n">`:
   \   000000   73656E64     DB "send heart\015\012"
   \            20686561
   \            72740D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "publish topic: %s, ms...">`:
   \   000000   7075626C     DB "publish topic: %s, msg: %s\015\012"
   \            69736820
   \            746F7069
   \            633A2025
   \            732C206D
   \            73673A20
   \            25730D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "subscribe topic: %s\\r\\n">`:
   \   000000   73756273     DB "subscribe topic: %s\015\012"
   \            63726962
   \            6520746F
   \            7069633A
   \            2025730D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_0:
   \   000000   00000000     DD 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1:
   \   000000   01000000     DD 1
    333          
    334          //主题订阅方法
    335          //const signed char *g_mqtt_topics[] = {"mqtt_topic", "topic_test"};
    336          //if(0 == onenet_mqtt_subscribe_topic(g_mqtt_topics, 2))
    337          
    338          
    339          

   Maximum stack usage in bytes:

   XSTACK Function
   ------ --------
     38   OneNet_DevLink
       23   -> ESP8266_SendData
       23   -> MQTT_DeleteBuffer
       38   -> MQTT_PacketConnect
       23   -> debug
       27   -> sprintf
     38   OneNet_RevPro
       28   -> ESP8266_SendData
       28   -> HalLedBlink
       28   -> MQTT_DeleteBuffer
       30   -> MQTT_PacketCmdResp
       28   -> MQTT_PacketPublishAck
       28   -> MQTT_PacketPublishComp
       28   -> MQTT_PacketPublishRec
       28   -> MQTT_PacketPublishRel
       32   -> MQTT_UnPacketCmd
       38   -> MQTT_UnPacketPublish
       28   -> MQTT_UnPacketPublishAck
       28   -> MQTT_UnPacketPublishComp
       28   -> MQTT_UnPacketPublishRec
       28   -> MQTT_UnPacketPublishRel
       28   -> MQTT_UnPacketRecv
       28   -> MQTT_UnPacketSubscribe
       28   -> MQTT_UnPacketUnSubscribe
       28   -> debug
       34   -> debug
       36   -> debug
       28   -> mqtt_rx
     43   mqtt_publish_topic
       27   -> ESP8266_SendData
       27   -> MQTT_DeleteBuffer
       43   -> MQTT_PacketPublish
       31   -> debug
       27   -> strlen
     30   mqtt_subscribe_topic
       27   -> ESP8266_SendData
       27   -> MQTT_DeleteBuffer
       30   -> MQTT_PacketSubscribe
       29   -> debug
     23   onenet_mqtt_send_heart
       23   -> ESP8266_SendData
       23   -> MQTT_DeleteBuffer
       23   -> MQTT_PacketPing
       23   -> debug


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ?<Constant "%s&%s">
      38  ?<Constant "123|securemode=3,sign...">
      41  ?<Constant "17225AC3F1B89135E1F19...">
      22  ?<Constant "Tips:  HeartBeat OK\r\n">
      27  ?<Constant "Tips:  MQTT Subscribe...">
      28  ?<Constant "Tips:  MQTT Subscribe...">_1
      29  ?<Constant "Tips:  MQTT UnSubscri...">
      30  ?<Constant "Tips:  MQTT UnSubscri...">_1
      25  ?<Constant "Tips:  Rev PublishComp\r\n">
      24  ?<Constant "Tips:  Rev PublishRec\r\n">
      24  ?<Constant "Tips:  Rev PublishRel\r\n">
      25  ?<Constant "Tips:  Send PublishAck\r\n">
      26  ?<Constant "Tips:  Send PublishCo...">
      25  ?<Constant "Tips:  Send PublishRec\r\n">
      25  ?<Constant "Tips:  Send PublishRel\r\n">
      29  ?<Constant "Tips:\tMQTT Publish Se...">
      21  ?<Constant "Tips:\tSend CmdResp\r\n">
      34  ?<Constant "WARN:\tMQTT_PacketConn...">
      12  ?<Constant "a1sYYwS4kmH">
      34  ?<Constant "cmdid: %s, req: %s, r...">
      17  ?<Constant "mqtt conneted!\r\n">
      10  ?<Constant "mytestdev">
      29  ?<Constant "publish topic: %s, ms...">
      13  ?<Constant "send heart\r\n">
      21  ?<Constant "start mqtt connet!\r\n">
      22  ?<Constant "subscribe topic: %s\r\n">
      57  ?<Constant "topic: %s, topic_len:...">
      11  ?<Constant {packet_buff, 0L, 300L, 0}>
      11  ?<Constant {packet_buff, 0L, 300L, 2}>
      11  ?<Constant {packet_buff, 0L, 300L, 2}>_1
      11  ?<Constant {packet_buff, 0L, 300L, 2}>_2
      11  ?<Constant {packet_buff, 0L, 300L, 2}>_3
       8  ??Subroutine6_0
       2  ?Subroutine0
      10  ?Subroutine1
       5  ?Subroutine2
       8  ?Subroutine3
      17  ?Subroutine4
       9  ?Subroutine5
     173  OneNet_DevLink
     699  OneNet_RevPro
       4  __Constant_0
       4  __Constant_1
      51  cmdid_topic
      30  mqttUsername
     144  mqtt_publish_topic
     139  mqtt_subscribe_topic
      52  onenet_mqtt_send_heart
     300  packet_buff
       2  pkt_id
     101  req_payload
      30  -- Other

 
 1 266 bytes in segment BANKED_CODE
    30 bytes in segment BANK_RELAYS
   757 bytes in segment XDATA_ROM_C
   484 bytes in segment XDATA_Z
 
    30 bytes of CODE     memory
   749 bytes of CONST    memory (+ 8 bytes shared)
 1 266 bytes of HUGECODE memory
   484 bytes of XDATA    memory

Errors: none
Warnings: 24
